(this.webpackJsonpqtb=this.webpackJsonpqtb||[]).push([[0],{419:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(40),l=n.n(r),c=(n(80),n.p,n(81),n(30)),s=n(41),o=n.n(s),u=n(74),f=n(75),p=n(7),d=n(8),b=n(13),h=n(3),g=n(10),m=n(9),j=n(42),v=n.n(j),O=(n(293),n(6)),y=n.n(O),x=(n(399),n(12)),A=n.n(x),k=n(0),N=!!navigator.userAgent.match(/Trident/i);v.a.configure({languages:["javascript","ruby","python","rust"]});var T=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).getMetaTagElements=function(e){var t=document.createElement("div");return t.innerHTML=e,t.getElementsByTagName("meta")},e}return Object(d.a)(n,[{key:"onPaste",value:function(){var e=Object(f.a)(o.a.mark((function e(t){var a,i,r,l=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.clipboardData||window.clipboardData,e.next=3,a.getData("Text");case 3:i=e.sent,(r=i.match(/\b(http|https)?:\/\/\S+/gi)||[]).length>0?(t.preventDefault(),r.forEach((function(e){A.a.get(e).then((function(e){var t,n,a,i,r=Object(u.a)(l.getMetaTagElements(e));try{for(r.s();!(i=r.n()).done;){var c=i.value;"og:title"===c.getAttribute("property")&&(t=c.getAttribute("content")),"og:image"===c.getAttribute("property")&&(n=c.getAttribute("content")),"og:url"===c.getAttribute("property")&&(a=c.getAttribute("content"))}}catch(p){r.e(p)}finally{r.f()}var s="<a href=".concat(a,' target="_blank"><div><img src=').concat(n," alt=").concat(t,' width="20%"/><span>').concat(t,"</span></div></a>"),o=l.quill.getSelection(),f=o?o.index:0;l.quill.pasteHTML(f,s,"silent"),l.quill.setSelection(f+s.length)})).catch((function(e){return console.error(e)}))}))):Object(b.a)(Object(h.a)(n.prototype),"onPaste",this).call(this,t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(O.Quill.import("modules/clipboard"));O.Quill.register("modules/clipboard",T,!0);var q=O.Quill.import("blots/block/embed"),C=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,null,[{key:"create",value:function(e){var t=Object(b.a)(Object(h.a)(n),"create",this).call(this);return t.setAttribute("src",e.src),t.setAttribute("alt",e.alt),t.setAttribute("width","100%"),t}},{key:"value",value:function(e){return{src:e.getAttribute("src"),alt:e.getAttribute("alt")}}}]),n}(q);C.blotName="image",C.tagName="img",O.Quill.register(C);var E=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,null,[{key:"create",value:function(e){if(e&&e.src){var t=Object(b.a)(Object(h.a)(n),"create",this).call(this);return t.setAttribute("src",e.src),t.setAttribute("title",e.title),t.setAttribute("width","100%"),t.setAttribute("controls",""),t}var a=document.createElement("iframe");return a.setAttribute("src",e),a.setAttribute("frameborder","0"),a.setAttribute("allowfullscreen",!0),a.setAttribute("width","100%"),a}},{key:"value",value:function(e){return e.getAttribute("title")?{src:e.getAttribute("src"),alt:e.getAttribute("title")}:e.getAttribute("src")}}]),n}(q);E.blotName="video",E.tagName="video",O.Quill.register(E);var F=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,null,[{key:"create",value:function(e){var t=document.createElement("span");t.innerText="\ucca8\ubd80\ud30c\uc77c - ";var a=document.createElement("b");a.innerText=e;var i=document.createElement("a");i.setAttribute("href",e),i.setAttribute("target","_blank"),i.setAttribute("className","file-link-inner-post"),i.appendChild(a);var r=Object(b.a)(Object(h.a)(n),"create",this).call(this);return r.appendChild(t),r.appendChild(i),r}},{key:"value",value:function(e){return e.querySelector("a").getAttribute("href")}}]),n}(q);F.blotName="file",F.tagName="p",F.className="file-inner-post",O.Quill.register(F);var R=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,null,[{key:"create",value:function(e){var t=document.createElement("span");t.innerText="\ud22c\ud45c - ";var a=document.createElement("b");a.innerText=e.title;var i=Object(b.a)(Object(h.a)(n),"create",this).call(this);return i.setAttribute("id",e.id),i.appendChild(t),i.appendChild(a),i}},{key:"value",value:function(e){return{id:e.getAttribute("id"),title:e.querySelector("b").innerText}}}]),n}(q);R.blotName="poll",R.tagName="p",R.className="poll-inner-post",O.Quill.register(R);var S=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).handleChange=function(e){console.log("html",e),a.setState({editorHtml:e},(function(){a.props.onEditorChange(a.state.editorHtml)}))},a.imageHandler=function(){a.inputOpenImageRef.current.click()},a.videoHandler=function(){a.inputOpenVideoRef.current.click()},a.fileHandler=function(){a.inputOpenFileRef.current.click()},a.insertImage=function(e){if(e.stopPropagation(),e.preventDefault(),e.currentTarget&&e.currentTarget.files&&e.currentTarget.files.length>0){var t=e.currentTarget.files[0],n=new FormData;n.append("file",t),A.a.post("/api/blog/uploadfiles",n,{header:{"content-type":"multipart/form-data"}}).then((function(e){if(!e.data.success)return alert("failed to upload file");var n=a.reactQuillRef.getEditor();n.focus();var i=n.getSelection(),r=i?i.index:0;n.insertEmbed(r,"image",{src:"http://localhost:5000/"+e.data.url,alt:e.data.fileName}),n.setSelection(r+1),a._isMounted&&a.setState({files:[].concat(Object(c.a)(a.state.files),[t])},(function(){a.props.onFilesChange(a.state.files)}))}))}},a.insertVideo=function(e){if(e.stopPropagation(),e.preventDefault(),e.currentTarget&&e.currentTarget.files&&e.currentTarget.files.length>0){var t=e.currentTarget.files[0],n=new FormData;n.append("file",t),A.a.post("/api/blog/uploadfiles",n,{header:{"content-type":"multipart/form-data"}}).then((function(e){if(!e.data.success)return alert("failed to upload file");var n=a.reactQuillRef.getEditor();n.focus();var i=n.getSelection(),r=i?i.index:0;n.insertEmbed(r,"video",{src:"http://localhost:5000/"+e.data.url,title:e.data.fileName}),n.setSelection(r+1),a._isMounted&&a.setState({files:[].concat(Object(c.a)(a.state.files),[t])},(function(){a.props.onFilesChange(a.state.files)}))}))}},a.insertFile=function(e){if(e.stopPropagation(),e.preventDefault(),e.currentTarget&&e.currentTarget.files&&e.currentTarget.files.length>0){var t=e.currentTarget.files[0];console.log(t);var n=new FormData;n.append("file",t),A.a.post("/api/blog/uploadfiles",n,{header:{"content-type":"multipart/form-data"}}).then((function(e){if(e.data.success){var n=a.reactQuillRef.getEditor();n.focus();var i=n.getSelection(),r=i?i.index:0;n.insertEmbed(r,"file",e.data.fileName),n.setSelection(r+1),a._isMounted&&a.setState({files:[].concat(Object(c.a)(a.state.files),[t])},(function(){a.props.onFilesChange(a.state.files)}))}}))}},a.modules={syntax:{highlight:function(e){return v.a.highlightAuto(e).value}},toolbar:{container:"#toolbar",handlers:{insertImage:a.imageHandler,insertVideo:a.videoHandler,insertFile:a.fileHandler,insertPoll:a.pollHandler}}},a.formats=["header","bold","italic","underline","strike","image","video","file","link","code-block","video","blockquote","clean"],a.state={editorHtml:N?"<p>&nbsp;</p>":"",files:[]},a.reactQuillRef=null,a.inputOpenImageRef=i.a.createRef(),a.inputOpenVideoRef=i.a.createRef(),a.inputOpenFileRef=i.a.createRef(),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{id:"toolbar",children:[Object(k.jsxs)("select",{className:"ql-header",defaultValue:"",onChange:function(e){return e.persist()},children:[Object(k.jsx)("option",{value:"1"}),Object(k.jsx)("option",{value:"2"}),Object(k.jsx)("option",{value:""})]}),Object(k.jsx)("button",{className:"ql-bold"}),Object(k.jsx)("button",{className:"ql-italic"}),Object(k.jsx)("button",{className:"ql-underline"}),Object(k.jsx)("button",{className:"ql-strike"}),Object(k.jsx)("button",{className:"ql-insertImage",children:"I"}),Object(k.jsx)("button",{className:"ql-insertVideo",children:"V"}),Object(k.jsx)("button",{className:"ql-insertFile",children:"F"}),Object(k.jsx)("button",{className:"ql-link"}),Object(k.jsx)("button",{className:"ql-code-block"}),Object(k.jsx)("button",{className:"ql-video"}),Object(k.jsx)("button",{className:"ql-blockquote"}),Object(k.jsx)("button",{className:"ql-clean"})]}),Object(k.jsx)(y.a,{ref:function(t){e.reactQuillRef=t},theme:"snow",onChange:this.handleChange,modules:this.modules,formats:this.formats,value:this.state.editorHtml,placeholder:this.props.placeholder}),Object(k.jsx)("input",{type:"file",accept:"image/*",ref:this.inputOpenImageRef,style:{display:"none"},onChange:this.insertImage}),Object(k.jsx)("input",{type:"file",accept:"video/*",ref:this.inputOpenVideoRef,style:{display:"none"},onChange:this.insertVideo}),Object(k.jsx)("input",{type:"file",accept:"*",ref:this.inputOpenFileRef,style:{display:"none"},onChange:this.insertFile})]})}}]),n}(i.a.Component);var w=function(){return Object(k.jsxs)("div",{style:{maxWidth:"700px",margin:"2rem auto"},children:[Object(k.jsx)("div",{style:{textAlign:"center"}}),Object(k.jsx)(S,{placeholder:"Write Here",onEditorChange:function(e){console.log(e)}})]})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,420)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,l=t.getTTFB;n(e),a(e),i(e),r(e),l(e)}))};l.a.render(Object(k.jsx)(i.a.StrictMode,{children:Object(k.jsx)(w,{})}),document.getElementById("root")),H()},80:function(e,t,n){},81:function(e,t,n){}},[[419,1,2]]]);
//# sourceMappingURL=main.bcc21a54.chunk.js.map